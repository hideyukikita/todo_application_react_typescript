# 学習管理アプリ作成
## 概要
- Docker、React、TypeScript、Node.jsを統合し、実用的なToDoアプリを作成する。
- 最終的には、同一WiFi内の他デバイス（スマホ等）からも利用可能なマルチデバイス環境を目指す。


## 技術スタック
- Frontend: React (Vite), TypeScript, Tailwind CSS, TanStack Query, Axios
- Backend: Node.js, Express, TypeScript, Zod (Validation)
- Database: PostgreSQL
- Infrastructure: Docker, Docker Compose
- Auth: JWT, bcrypt (パスワードハッシュ化)


## 開発ロードマップ（全3フェーズ）
### 【Phase 1】基盤構築：基本機能の完成（ログインなし）
  - まずは「データがDBに保存され、表示される」最小単位を完成させます。
1. プロジェクト作成とDocker化
   - フロント・バック・DBのディレクトリ作成。
   - docker-compose.yml の作成（PostgreSQLのVolume設定、A5M2接続用のポート開放）。
2. バックエンド基本実装
   - Prismaの導入（スキーマ定義、Migration実行）。
   - TodoのCRUD（作成・読み取り・更新・削除）API作成。
3. フロントエンド基本実装
   - Vite + Tailwind環境構築。
   - TanStack Query を使用したAPI連携（一覧表示・投稿フォーム）。
   - タスク一覧表示(優先度のソート機能・締切日でのソート機能をつける)。
   - Rechartsの活用: 「完了タスク vs 未完了タスク」の比率や、「日別のタスク完了数」をグラフ化する。

### 【Phase 2】環境拡張：ネットワーク接続テスト
   - 「自分のPC以外」からアクセスできる状態にし、環境変数の重要性を学びます。
1. Viteのネットワーク開放
   - vite.config.ts で host: true を設定。
2. 環境変数（.env）の整理
   - APIのURL、DB接続情報を .env に切り出し。
   - 自分のPCのIPアドレスを指定し、スマホ等のブラウザから http://[IPアドレス]:5173 で操作できるか確認。
3. CORS設定
   - Expressで他IPからの通信を許可する設定。

### 【Phase 3】品質向上：ユーザー管理とバリデーション
   - セキュリティと堅牢性を追加し、アプリを完成させます。
1. ユーザー管理（Auth）の実装
   - bcrypt によるパスワードハッシュ化。
   - JWT の発行と、ミドルウェアによるAPI保護。
   - フロントエンドでの「ログイン状態」の保持とログイン画面作成。
2. Zodによるバリデーション
   - 共通のバリデーションスキーマを作成。
   - フロントエンド：フォーム送信前のエラー表示。
   - バックエンド：不正データの書き込み防止。


## 学習のポイント（なぜこれをやるか）
| 技術要素 | 学べること・メリット |
| --------| ------------------- |
| TanStack Query |API通信の「ロード中・エラー・成功」の状態管理をスマートに行う。|
| Zod |「実行時」のデータチェックを行い、不正なデータによるエラーを未然に防ぐ。 |
| JWT | ステートレスな認証（サーバーにセッションを保存しない）の仕組みを理解する。|
| .env / IP接続	| ローカル開発と公開（本番）環境の「外との繋がり」の違いを理解する。|

## ワンポイント
### 論理削除の実装ポイント
- 論理削除を扱う場合、Prismaのクエリは下記になる
```
// 取得時（SQLで直接条件を指定）
const query = 'SELECT * FROM todos WHERE user_id = $1 AND deleted_at IS NULL';
const { rows } = await pool.query(query, [currentUserId]);

// 削除時（UPDATEで削除時刻を入れる）
const deleteQuery = 'UPDATE todos SET deleted_at = NOW() WHERE id = $1';
await pool.query(deleteQuery, [todoId]);
```